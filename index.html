<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <title>TODO LIST</title>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script src="node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
    <script src="node_modules/lit/polyfill-support.js"></script>
    <script type="module" src="../my-element.js"></script>
    <style>
      p {
        border: solid 1px blue;
        padding: 8px;
      }
    </style>
    <script>
      window.onload = (event) => {
        
        console.log('page is fully loaded');
        const myElement = document.getElementsByTagName('my-element');
        //myElement[0].addEventListener('count-changed', handleOnCounter(event));
        myElement[0].addEventListener('create', handleCreate)
      };
      function handleCreate(){
        document.getElementsByName('description-task')[0].removeAttribute("disabled");
        document.getElementsByName('btn-save-task')[0].removeAttribute("disabled");
      }
      function onClickAddTask() {
        const task = document.getElementsByName('description-task')[0].value;
        const myElement = document.getElementsByTagName('my-element')[0];
        myElement.addTask(task);
        document.getElementsByName('description-task')[0].value = ""
        document.getElementsByName('description-task')[0].setAttribute("disabled", true);
        document.getElementsByName('btn-save-task')[0].setAttribute("disabled", true);
      }
      function handleOnCounter(e) {
        console.log(e);
      }
    </script>
  </head>
  <body>
    <form>
      <input type="text" name="description-task" disabled/>
      <button type='button' onclick="onClickAddTask()" name="btn-save-task" disabled>SAVE</button>
    </form>
    <my-element
      
      name="KARCELES"
      onCustomEvent="(e) => handleOnCounter(e)"
    />
  </body>
</html>
